<!DOCTYPE html>
<html>
<head>
	<title>TMDB Action Movies</title>
	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
	<style>
		.movieContainer {
			display: flex;
			flex-wrap: wrap;
			justify-content: center;
			align-items: center;
		}

		.movies {
			max-width: 600px;
			display: flex;
			flex-wrap: wrap;
			justify-content: center;
			align-items: center;
		}

		.movieBox {
			margin: 10px;
			display: flex;
			flex-direction: column;
			align-items: center;
			max-width: 200px;
			min-width: 200px;
		}

		.moviePoster {
			max-width: 100%;
			height: auto;
		}

		.title {
			font-size: 1.2em;
			font-weight: bold;
			margin: 10px 0;
			text-align: center;
		}

		.ratingCon {
			display: flex;
			flex-direction: row;
			justify-content: space-between;
			align-items: center;
			width: 80%;
		}

		.rating {
			font-size: 1.2em;
			font-weight: bold;
			color: #f1c40f;
		}

		.year {
			font-size: 1.2em;
			font-weight: bold;
			color: #bdc3c7;
		}
	</style>
</head>
<body>
	<div class="movieContainer"></div>

	<script>
		$(document).ready(function() {
			// Set your API key here
			const apiKey = "068f0f7197e9637e1ff61c5fdffa4c95";
			// Set the genre ID for action movies
			const genreId = 28;
			// Set the number of pages to display
			const numPages = 3;
			// Set the number of movies to display per page
			const moviesPerPage = 20;

			// Loop through each page and fetch the movie data
			for (let i = 1; i <= numPages; i++) {
				$.ajax({
					url: `https://api.themoviedb.org/3/discover/movie?api_key=${apiKey}&language=en-US&sort_by=popularity.desc&include_adult=true&include_video=false&page=${i}&with_genres=${genreId}`,
					success: function(result) {
						// Loop through each movie result and create a movie box
						result.results.forEach(function(movie) {
							// Create a new movie box element
							const movieBox = $('<div>').addClass('movieBox');

							// Create an image element for the movie poster
							const posterImg = $('<img>').addClass('moviePoster').attr('src', `https://image.tmdb.org/t/p/w500${movie.poster_path}`).attr('alt', 'Movie Poster');

							// Create a div element for the movie title
							const titleDiv = $('<div>').addClass('title').text(movie.title);

							// Create a div element for the movie rating and year
							const ratingCon = $('<div>').addClass('ratingCon');
							const ratingDiv = $('<div>').addClass('rating').text(`Rating: ${movie.vote_average}`);
							const yearDiv = $('<div>').addClass('year').text(`Year: ${movie.release_date.slice(0, 4)}`);

							// Append the elements to the movie box
							ratingCon.append(ratingDiv, yearDiv);
							movieBox.append(posterImg, titleDiv, ratingCon);

							// Append the movie box to the movie container
							$('.movieContainer').append(movieBox);
						});
					}
				});
			}
		});
	</script>
</body>
</html>