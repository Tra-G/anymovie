<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <style>
    button {
  background-color: #4CAF50;
  color: white;
  padding: 10px 20px;
  border: none;
  cursor: pointer;
  border-radius: 5px;
}

button.active {
  background-color: #008CBA;
}

#movies {
  margin-top: 20px;
}
  </style>
</head>
<body>
  <div id="buttons">
    <button id="trending" class="active" onclick="displayMovies('trending')">Trending</button>
    <button id="upcoming" onclick="displayMovies('upcoming')">Upcoming</button>
    <button id="top-rated" onclick="displayMovies('top_rated')">Top Rated</button>
    <button id="new-movies" onclick="displayMovies('now_playing')">New Movies</button>
  </div>
  
  <div id="movies"></div>


  <script>
    // Set API key and base URL
  const apiKey = '068f0f7197e9637e1ff61c5fdffa4c95';
  const baseURL = 'https://api.themoviedb.org/3';

  // Display trending movies by default
  displayMovies('upcoming');

  // Function to display movies based on button clicked
  function displayMovies(type) {
  // Clear movies container
    const moviesContainer = document.getElementById('movies');
    moviesContainer.innerHTML = '';

    // Add active class to clicked button and remove from others
    const buttons = document.querySelectorAll('#buttons button');
    buttons.forEach(button => {
      if (button.id === type) {
        button.classList.add('active');
      } else {
        button.classList.remove('active');
      }
    });

  // Fetch movies from API
  const url = `${baseURL}/movie/${type}?api_key=${apiKey}&language=en-US&page=1`;
  fetch(url)
      .then(response => response.json())
      .then(data => {
        const movie = data.results[0];       
        
        const backdropUrl = 'https://image.tmdb.org/t/p/original' + movie.backdrop_path;
        const posterUrl = 'https://image.tmdb.org/t/p/w500' + movie.poster_path;

        // Set the background image
        const bgImageElement = document.querySelector('.bgImage');
        bgImageElement.style.backgroundImage = `linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url(${backdropUrl})`;

        // Set the movie title, year, rating, genre, and overview
        const titleElement = document.querySelector('.title');
        const yearElement = document.querySelector('.year');
        const ratingElement = document.querySelector('.rating');
        const genreElement = document.querySelector('.genre');
        const overviewElement = document.querySelector('.overview');

        //combine them
        titleElement.textContent = movie.original_title;
        yearElement.textContent = movie.release_date.substring(0, 4);
        ratingElement.textContent = movie.vote_average;
        genreElement.textContent = movie.genre_ids.join(', ');
        overviewElement.textContent =movie.overview;
      })
      .catch(error => console.error(error));
}
  </script>
</body>
</html>