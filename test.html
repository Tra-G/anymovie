<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div class="movieContainer"></div>


    <script>
        // Select the movie container 
const movieContainer = document.querySelector('.movieContainer');

// API URL
const URL = 'https://api.themoviedb.org/3/discover/movie?api_key=068f0f7197e9637e1ff61c5fdffa4c95&language=en-US&sort_by=popularity.desc&include_adult=false&include_video=false&page=1&with_genres=28&page_size=18';

// Fetch movies 
async function getMovies(url) {
  const res = await fetch(url);
  const data = await res.json();
  showMovies(data.results); 
}

// Display movies
function showMovies(movies) {
  movies.forEach(movie => {
    console.log(movies.length)
    const movieBox = document.createElement('div');
    movieBox.classList.add('movieBox');
    
    const poster = document.createElement('img');
    poster.classList.add('moviePoster');
    poster.src = 'https://image.tmdb.org/t/p/w500/' + movie.poster_path;  
      
    const title = document.createElement('div');
    title.classList.add('title');  
    title.textContent = movie.title;  
    
    const ratingCon = document.createElement('div');
    ratingCon.classList.add('ratingCon');  
    
    const rating = document.createElement('div');
    rating.classList.add('rating');
    rating.textContent = movie.vote_average;  
    
    const year = document.createElement('div');
    year.classList.add('year'); 
    year.textContent = movie.release_date.substring(0, 4);

    ratingCon.append(rating, year);
    movieBox.append(poster, title, ratingCon);
    movieContainer.append(movieBox);
  });  
}

// Call the function to get movies 
getMovies(URL + '&page=1'); 
getMovies(URL + '&page=2'); 
getMovies(URL + '&page=3');
    </script>
</body>
</html>